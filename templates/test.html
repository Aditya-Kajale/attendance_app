<!DOCTYPE html>
<html>
  <head>
    <title>Attendance Form</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
      $(document).ready(function () {
        var dict = {
          BTECH: {
            A: {
              "Software Engineering": [
                "A1",
                "A2",
                "A3",
                "A4",
                "A5",
                "Other Attendance",
              ],
              "Big Data Analytics": ["A1", "A2", "A3", "A4", "A5"],
            },
          },
          TY: { A: { "Compiler Design": ["A1", "A2", "A3", "A4", "A5"] } },
          SY: { B: { "Second Year Sub": ["B1", "B2", "B3", "B4", "B5"] } },
        };

        // populate year dropdown
        var years = Object.keys(dict);
        var $yearDropdown = $("#year-dropdown");
        $.each(years, function (i, year) {
          $yearDropdown.append($("<option></option>").val(year).html(year));
        });

        // populate division dropdown based on year selection
        $yearDropdown.change(function () {
          var selectedYear = $(this).val();
          var divisions = Object.keys(dict[selectedYear]);
          var $divisionDropdown = $("#division-dropdown");
          $divisionDropdown.empty();
          $.each(divisions, function (i, division) {
            $divisionDropdown.append(
              $("<option></option>").val(division).html(division)
            );
          });
          $divisionDropdown.trigger("change");
        });

        // populate subject dropdown based on division selection
        $("#division-dropdown").change(function () {
          var selectedYear = $("#year-dropdown").val();
          var selectedDivision = $(this).val();
          var subjects = Object.keys(dict[selectedYear][selectedDivision]);
          var $subjectDropdown = $("#subject-dropdown");
          $subjectDropdown.empty();
          $.each(subjects, function (i, subject) {
            if (subject.includes("Other Attendance")) {
              $subjectDropdown.append(
                $("<option></option>").val(subject).html(subject)
              );
            }
          });
          $subjectDropdown.trigger("change");
        });

        // populate checkboxes based on subject selection
        $("#subject-dropdown").change(function () {
          var selectedYear = $("#year-dropdown").val();
          var selectedDivision = $("#division-dropdown").val();
          var selectedSubject = $(this).val();
          var checkboxes =
            dict[selectedYear][selectedDivision][selectedSubject];
          var $checkboxesContainer = $("#checkboxes-container");
          $checkboxesContainer.empty();
          $.each(checkboxes, function (i, checkbox) {
            $checkboxesContainer.append(
              $("<label></label>")
                .html(checkbox)
                .append(
                  $("<input></input>")
                    .attr("type", "checkbox")
                    .attr("value", checkbox)
                )
            );
          });
        });
      });
    </script>
  </head>
  <body>
    <h1>Attendance Form</h1>
    <form>
      <label for="year-dropdown">Year:</label>
      <select id="year-dropdown"></select>

      <label for="division-dropdown">Division:</label>
      <select id="division-dropdown"></select>

      <div id="subject-container" style="display: none">
        <label for="subject-dropdown">Subject:</label>
        <select id="subject-dropdown"></select>
      </div>

      <div id="checkboxes-container"></div>

      <button type="submit">Submit</button>
    </form>
  </body>
</html>
